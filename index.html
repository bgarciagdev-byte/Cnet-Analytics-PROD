<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CentroNet Analytics · Visor (solo lectura)</title>
  <style>
    :root{ --bg:#0b1220; --bg-2:#0f172a; --fg:#e2e8f0; --muted:#94a3b8; --accent:#22d3ee; --accent-2:#38bdf8; --border:#1f2937; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial;background:linear-gradient(180deg,var(--bg),var(--bg-2));color:var(--fg);overflow:hidden}
    .app{display:grid;grid-template-columns:240px 1fr;height:100vh}

    /* Sidebar ..*/
    aside{background:rgba(17,24,39,.9);border-right:1px solid var(--border);padding:14px 12px;display:flex;flex-direction:column;gap:12px}
    .brand{display:flex;align-items:center;gap:10px;padding:6px 8px;border-radius:12px;background:rgba(34,211,238,.08);border:1px solid var(--border)}
    .logo{width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,var(--accent),var(--accent-2));box-shadow:0 6px 24px rgba(34,211,238,.35)}
    .brand h1{font-size:16px;margin:0}

    .list{display:flex;flex-direction:column;gap:8px;overflow:auto;padding-right:4px}
    .rbtn{appearance:none;display:block;width:100%;text-align:left;padding:10px 12px;border:1px solid var(--border);border-radius:12px;background:#0b1220;color:var(--fg);cursor:pointer;font-size:14px}
    .rbtn:hover{border-color:var(--accent)}
    .rbtn.active{background:linear-gradient(180deg,#0b1220,#102035);border-color:var(--accent)}

    /* Viewer */
    main{position:relative}
    .viewer{position:relative;width:100%;height:100vh}
    iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
    .empty{position:absolute;inset:0;display:grid;place-items:center;color:var(--muted)}

    /* Mobile */
    @media (max-width: 900px){
      .app{grid-template-columns:1fr}
      aside{position:fixed;inset:0 35% 0 0;z-index:10;transform:translateX(-100%);transition:.25s transform}
      aside.open{transform:translateX(0)}
      .overlay{display:none}
      .overlay.show{display:block;position:fixed;inset:0;background:rgba(0,0,0,.45);backdrop-filter:blur(2px)}
      .topbar{display:flex;gap:8px;position:fixed;top:8px;left:8px;z-index:11}
      .topbar .menu{background:#0b1220;border:1px solid var(--border);color:var(--fg);border-radius:10px;padding:8px 10px}
    }
  </style>
</head>
<body>
  <div class="app">
    <aside id="sidebar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <h1>CentroNet Analytics</h1>
      </div>
      <div class="list" id="reportList" aria-label="Listado de reportes"></div>
      <div class="hint" style="font-size:12px;color:var(--muted)">Para agregar o cambiar enlaces, edita el código (array <code>DEFAULT_REPORTS</code>) y publica.</div>
    </aside>

    <div class="overlay" id="overlay"></div>

    <main>
      <div class="topbar"><button class="menu" id="openSidebar" aria-label="Abrir menú">☰</button></div>
      <div class="viewer" id="viewer">
        <div class="empty" id="empty">Selecciona un reporte</div>
        <iframe id="frame" allowfullscreen title="Power BI"></iframe>
      </div>
    </main>
  </div>

  <script>
    // === SOLO LECTURA ===
    // Edita aquí tus reportes. Solo nombres (botones) en el panel izquierdo.
    const DEFAULT_REPORTS = [
      {
        id: 'cn-ejecutivo',
        name: 'CN · Ejecutivo',
        src: 'https://app.powerbi.com/view?r=eyJrIjoiMWI3NDRkZmQtNGFlNC00OTYzLTg5YzAtMmQ1MDI0OWIyZWIxIiwidCI6ImEyNGFlYmMxLWMwNzctNDA5My1hNzZiLTVlYTE4NTcxMTk1NiJ9'
      }
      // { id:'ventas', name:'Ventas Regional', src:'https://app.powerbi.com/view?r=...' },
      // { id:'finanzas', name:'Finanzas', src:'https://app.powerbi.com/view?r=...' },
    ];

    const reports = DEFAULT_REPORTS;
    let selectedId = null;

    function renderList(){
      const list = document.getElementById('reportList');
      list.innerHTML = '';
      reports.forEach(r=>{
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'rbtn' + (r.id===selectedId? ' active':'');
        btn.textContent = r.name;
        btn.dataset.id = r.id;
        btn.onclick = ()=> selectReport(r.id);
        list.appendChild(btn);
      });
    }

    function selectReport(id){
      const r = reports.find(x=>x.id===id);
      const frame = document.getElementById('frame');
      const empty = document.getElementById('empty');
      if(!r){ frame.removeAttribute('src'); empty.style.display='grid'; return; }
      selectedId = id;
      document.querySelectorAll('.rbtn').forEach(n=>n.classList.toggle('active', n.dataset.id===id));
      frame.src = r.src; empty.style.display='none';
      // permite compartir la vista actual
      location.hash = 'r=' + encodeURIComponent(id);
    }

    // Sidebar móvil
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const openBtn = document.getElementById('openSidebar');
    if(openBtn){ openBtn.onclick = ()=>{ sidebar.classList.add('open'); overlay.classList.add('show'); }; }
    if(overlay){ overlay.onclick = ()=>{ sidebar.classList.remove('open'); overlay.classList.remove('show'); }; }

    // Init
    renderList();
    const hashId = new URLSearchParams(location.hash.replace(/^#/,'')).get('r');
    const firstId = reports[0] && reports[0].id;
    selectReport(hashId && reports.some(r=>r.id===hashId) ? hashId : firstId);
  </script>
</body>
</html>
