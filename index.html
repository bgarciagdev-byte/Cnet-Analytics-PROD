<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CentroNet Analytics · Visor (solo lectura)</title>
  <style>
    :root{ --bg:#0b1220; --bg-2:#0f172a; --card:#111827; --muted:#94a3b8; --fg:#e2e8f0; --accent:#22d3ee; --accent-2:#38bdf8; --border:#1f2937; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial;background:linear-gradient(180deg,var(--bg),var(--bg-2));color:var(--fg)}
    .app{display:grid;grid-template-columns:280px 1fr;min-height:100vh}

    aside{background:rgba(17,24,39,.8);border-right:1px solid var(--border);padding:14px 12px;display:flex;flex-direction:column;gap:12px}
    .brand{display:flex;align-items:center;gap:10px;padding:6px 8px;border-radius:12px;background:rgba(34,211,238,.08);border:1px solid var(--border)}
    .logo{width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,var(--accent),var(--accent-2));box-shadow:0 6px 24px rgba(34,211,238,.35)}
    .brand h1{font-size:16px;margin:0}
    .hint{font-size:12px;color:var(--muted)}

    .list{display:flex;flex-direction:column;gap:6px;overflow:auto;padding-right:4px}
    .item{display:flex;align-items:center;gap:8px;padding:10px;border:1px solid var(--border);border-radius:12px;background:#0b1220;cursor:pointer;opacity:.9}
    .item:hover{opacity:1;border-color:var(--accent)}
    .item.active{background:linear-gradient(180deg,#0b1220,#102035);border-color:var(--accent)}
    .item .dot{width:8px;height:8px;border-radius:999px;background:var(--accent)}
    .item .name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

    main{position:relative;padding:12px}
    header.top{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;padding:10px 12px;border:1px solid var(--border);border-radius:14px;background:rgba(17,24,39,.6)}
    .title{font-size:14px;color:var(--muted)}
    .current{font-weight:600;color:var(--fg)}

    .viewer{height:calc(100vh - 24px);background:rgba(17,24,39,.7);border:1px solid var(--border);border-radius:16px;overflow:hidden;position:relative}
    iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
    .empty{position:absolute;inset:0;display:grid;place-items:center;color:var(--muted)}

    .mobilebar{display:none}
    @media (max-width: 900px){
      .app{grid-template-columns:1fr}
      aside{position:fixed;inset:0 30% 0 0;z-index:10;transform:translateX(-100%);transition:.25s transform}
      aside.open{transform:translateX(0)}
      .overlay{display:none}
      .overlay.show{display:block;position:fixed;inset:0;background:rgba(0,0,0,.45);backdrop-filter:blur(2px)}
      .mobilebar{display:flex;gap:8px;position:sticky;top:0;background:rgba(17,24,39,.8);border-bottom:1px solid var(--border);padding:8px}
    }
  </style>
</head>
<body>
  <div class="app">
    <aside id="sidebar">
      <div class="brand">
        <div class="logo"></div>
        <h1>CentroNet Analytics</h1>
      </div>
      <div class="hint">Visor de reportes (solo lectura)</div>
      <div class="list" id="reportList"></div>
      <div class="hint">Para agregar o cambiar enlaces, edita el código fuente (array DEFAULT_REPORTS) y publica.</div>
    </aside>

    <div class="overlay" id="overlay"></div>

    <main>
      <div class="mobilebar">
        <button class="btn" id="openSidebar">☰ Menú</button>
        <div class="title">Actual: <span class="current" id="currentTitle">—</span></div>
      </div>

      <header class="top">
        <div class="title">Actual: <span class="current" id="currentTitleDesktop">—</span></div>
        <div class="hint">Selecciona un reporte a la izquierda</div>
      </header>

      <div class="viewer" id="viewer">
        <div class="empty" id="empty">
          <div>
            <div style="font-size:18px;margin-bottom:6px">Selecciona un reporte</div>
            <div class="hint">Los enlaces están definidos por el administrador en el código.</div>
          </div>
        </div>
        <iframe id="frame" allowfullscreen title="Power BI"></iframe>
      </div>
    </main>
  </div>

  <script>
    // === SOLO LECTURA ===
    // Para agregar/editar reportes, modifica este array y publica.
    // Cada elemento: { id, name, src } donde src = URL "Publicar en la web" de Power BI.
    const DEFAULT_REPORTS = [
      {
        id: 'cn-ejecutivo',
        name: 'CN · Ejecutivo',
        src: 'https://app.powerbi.com/view?r=eyJrIjoiMWI3NDRkZmQtNGFlNC00OTYzLTg5YzAtMmQ1MDI0OWIyZWIxIiwidCI6ImEyNGFlYmMxLWMwNzctNDA5My1hNzZiLTVlYTE4NTcxMTk1NiJ9'
      }
      // Agrega más objetos aquí…
      // { id:'ventas', name:'Ventas Regional', src:'https://app.powerbi.com/view?r=...' },
    ];

    const reports = DEFAULT_REPORTS;
    let selectedId = null;

    function renderList(){
      const list = document.getElementById('reportList');
      list.innerHTML = '';
      reports.forEach(r=>{
        const item = document.createElement('div');
        item.className = 'item' + (r.id===selectedId? ' active':'');
        item.dataset.id = r.id;
        item.innerHTML = `<div class="dot"></div><div class="name" title="${r.name}">${r.name}</div>`;
        item.onclick = ()=> selectReport(r.id);
        list.appendChild(item);
      });
    }

    function selectReport(id){
      const r = reports.find(x=>x.id===id);
      const frame = document.getElementById('frame');
      const empty = document.getElementById('empty');
      const t1 = document.getElementById('currentTitle');
      const t2 = document.getElementById('currentTitleDesktop');
      if(!r){ frame.removeAttribute('src'); empty.style.display='grid'; t1.textContent=t2.textContent='—'; return; }
      selectedId = id;
      document.querySelectorAll('.item').forEach(n=>n.classList.toggle('active', n.dataset.id===id));
      frame.src = r.src; empty.style.display='none';
      t1.textContent = t2.textContent = r.name;
      // hash para compartir vista actual
      location.hash = 'r=' + encodeURIComponent(id);
    }

    // Sidebar móvil
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const openBtn = document.getElementById('openSidebar');
    if(openBtn){ openBtn.onclick = ()=>{ sidebar.classList.add('open'); overlay.classList.add('show'); }; }
    if(overlay){ overlay.onclick = ()=>{ sidebar.classList.remove('open'); overlay.classList.remove('show'); }; }

    // Inicialización
    renderList();
    const hashId = new URLSearchParams(location.hash.replace(/^#/,'')).get('r');
    const firstId = reports[0] && reports[0].id;
    selectReport(hashId && reports.some(r=>r.id===hashId) ? hashId : firstId);
  </script>
</body>
</html>
